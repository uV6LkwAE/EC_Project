
{% extends "base.html" %}

{% load static %}
{% load humanize %}
{% block title %}å–å¼•è©³ç´°{% endblock %}

{% block content %}

<div class="container mt-4">
    <h1 class="mb-4">å–å¼•è©³ç´°</h1>

    <!-- å•†å“æƒ…å ± -->
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card hover-effect">
                <div class="card-img-top position-relative">
                    <div class="sold-overlay">
                        <object type="image/svg+xml" data="{% static 'images/sold_layer.svg' %}" class="sold-image"></object>
                    </div>
                    <img src="{{ first_image.image.url }}" class="card-img-top" alt="å•†å“ç”»åƒ">
                </div>
                <div class="card-body">
                    <h2 class="card-title">{{ transaction.product.title }}</h2>
                    <h5 class="card-text">Â¥{{ transaction.product.price | intcomma }}</h5>
                    <a href="{% url 'products:product_detail' transaction.product.id %}" class="btn btn-primary">è©³ç´°ã‚’è¦‹ã‚‹</a>
                </div>
            </div>
        </div>

        <!-- å–å¼•æƒ…å ± -->
        <div class="col-md-8">
            <h2>å–å¼•ç”»é¢</h2>

            <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã”ã¨ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
            {% if transaction.status == "order_confirmed" %}
                {% if user_is_buyer %}
                    <div class="alert alert-danger">
                        æ³¨æ–‡ãŒç¢ºå®šã—ã¾ã—ãŸã€‚å‡ºå“è€…ã‹ã‚‰ã®ç™ºé€é€šçŸ¥ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚
                    </div>
                {% elif user_is_seller %}
                    <div class="alert alert-danger">
                        æ³¨æ–‡ãŒç¢ºå®šã—ã¾ã—ãŸã€‚ç™ºé€å®Œäº†å¾Œã«ã€ã€Œç™ºé€å®Œäº†ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚
                    </div>
                {% endif %}
            {% elif transaction.status == "shipped" %}
                {% if user_is_buyer %}
                    <div class="alert alert-danger">
                        å‡ºå“è€…ã‹ã‚‰ç™ºé€é€šçŸ¥ãŒè¡Œã‚ã‚Œã¾ã—ãŸã€‚å•†å“ãŒåˆ°ç€ã—ãŸã‚‰ã€Œå—ã‘å–ã‚Šå®Œäº†ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚
                    </div>
                {% elif user_is_seller %}
                    <div class="alert alert-danger">
                        ç™ºé€é€šçŸ¥ãŒå®Œäº†ã—ã¾ã—ãŸã€‚è³¼å…¥è€…ã‹ã‚‰ã®å—ã‘å–ã‚Šå®Œäº†é€šçŸ¥ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚
                    </div>
                {% endif %}
            {% elif transaction.status == "received" %}
                <div class="alert alert-danger mt-3 text-center">
                    {% if user_is_buyer %}
                        å‡ºå“è€…ã¯
                        {% if buyer_rating_exists %}
                            ã™ã§ã«è©•ä¾¡ã‚’æŠ•ç¨¿ã—ã¦ã„ã¾ã™ã€‚
                        {% else %}
                            è©•ä¾¡ã‚’ã¾ã æŠ•ç¨¿ã—ã¦ã„ã¾ã›ã‚“ã€‚ä¸¡è€…ã‹ã‚‰è©•ä¾¡ãŒæŠ•ç¨¿ã•ã‚Œã‚‹ã¨ã€å–å¼•ãŒå®Œäº†ã—ã¾ã™ã€‚
                        {% endif %}
                    {% elif user_is_seller %}
                        è³¼å…¥è€…ã¯
                        {% if seller_rating_exists %}
                            ã™ã§ã«è©•ä¾¡ã‚’æŠ•ç¨¿ã—ã¦ã„ã¾ã™ã€‚
                        {% else %}
                            è©•ä¾¡ã‚’ã¾ã æŠ•ç¨¿ã—ã¦ã„ã¾ã›ã‚“ã€‚ä¸¡è€…ã‹ã‚‰è©•ä¾¡ãŒæŠ•ç¨¿ã•ã‚Œã‚‹ã¨ã€å–å¼•ãŒå®Œäº†ã—ã¾ã™ã€‚
                        {% endif %}
                    {% endif %}
                </div>

                {% if not user_rating_exists %}
                    <!-- ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè©•ä¾¡ã‚’æŠ•ç¨¿ã—ã¦ã„ãªã„å ´åˆã€ã‹ã¤ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ä»¥å¤–ã«ç™ºç«ã™ã‚‹ -->
                    {% if not form.is_submitted %}
                        <script type="text/javascript">
                            document.addEventListener('DOMContentLoaded', function() {
                                alert("ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒå—ã‘å–ã‚Šå®Œäº†ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸã€‚\nä¸¡è€…ã‹ã‚‰è©•ä¾¡ãŒæŠ•ç¨¿ã•ã‚Œã‚‹ã¨ã€å–å¼•ãŒå®Œäº†ã—ã¾ã™");
                                
                                // #ratingModalã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹
                                var modalButton = document.getElementById('ratingModalButton');  // ãƒœã‚¿ãƒ³ã«idã‚’è¿½åŠ 
                                if (modalButton) {
                                    modalButton.click();  // ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
                                }
                            });
                        </script>
                    {% endif %}
                {% endif %}

                {% if user_is_buyer %}
                    {% if user_rating_exists %}
                        <!-- è³¼å…¥è€…ãŒè©•ä¾¡ã‚’ã™ã§ã«æŠ•ç¨¿ã—ã¦ã„ã‚‹å ´åˆ -->
                        <button type="button" class="btn btn-secondary" disabled>
                            ã‚ãªãŸã¯ã™ã§ã«è©•ä¾¡ã‚’æŠ•ç¨¿ã—ã¦ã„ã¾ã™ã€‚
                        </button>
                    {% else %}
                        <!-- è³¼å…¥è€…ãŒè©•ä¾¡ã‚’æŠ•ç¨¿ã—ã¦ã„ãªã„å ´åˆ -->
                        <button type="button" id="ratingModalButton" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#ratingModal">
                            å‡ºå“è€…ã‚’è©•ä¾¡ã™ã‚‹
                        </button>
                    {% endif %}
                    {% elif user_is_seller %}
                        {% if user_rating_exists %}
                            <!-- å‡ºå“è€…ãŒè©•ä¾¡ã‚’ã™ã§ã«æŠ•ç¨¿ã—ã¦ã„ã‚‹å ´åˆ -->
                            <button type="button" class="btn btn-secondary" disabled>
                                ã‚ãªãŸã¯ã™ã§ã«è©•ä¾¡ã‚’æŠ•ç¨¿ã—ã¦ã„ã¾ã™ã€‚
                            </button>
                        {% else %}
                            <!-- å‡ºå“è€…ãŒè©•ä¾¡ã‚’æŠ•ç¨¿ã—ã¦ã„ãªã„å ´åˆ -->
                            <button type="button" id="ratingModalButton" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#ratingModal">
                                è³¼å…¥è€…ã‚’è©•ä¾¡ã™ã‚‹
                            </button>
                        {% endif %}
                {% endif %}

            {% elif transaction.status == 'completed' %}
                <div class="alert alert-danger">
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            // ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤º
                            alert("å–å¼•ãŒå®Œäº†ã—ã¾ã—ãŸã€‚\nå®Œäº†ã—ãŸå–å¼•ã¯è³¼å…¥ã—ãŸå•†å“ã§ç¢ºèªã§ãã¾ã™ã€‚\nãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚");

                            // ã‚¢ãƒ©ãƒ¼ãƒˆå¾Œã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã¸é·ç§»
                            window.location.href = "{% url 'accounts:profile' %}";  // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã«é·ç§»
                        });
                    </script>
                </div>
            {% endif %}

            <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã”ã¨ã®ãƒœã‚¿ãƒ³ -->
            {% if user == transaction.seller and transaction.status == "order_confirmed" %}
            <form id="shipping-form" method="post" action="{% url 'transactions:update_transaction_status' transaction.id %}">
                {% csrf_token %}
                <input type="hidden" name="status" value="shipped">
                <button type="submit" class="btn btn-primary">ç™ºé€å®Œäº†</button>
            </form>
            {% elif user == transaction.buyer and transaction.status == "shipped" %}
            <form method="post" action="{% url 'transactions:update_transaction_status' transaction.id %}">
                {% csrf_token %}
                <input type="hidden" name="status" value="received">
                <button type="submit" class="btn btn-success" id="receiveBtn">å—ã‘å–ã‚Šå®Œäº†</button>
            </form>
            {% endif %}

            <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
            <ul class="progressbar mt-4">
                <li class="{% if progress_percentage >= 0 %}active{% endif %}">æ³¨æ–‡ç¢ºå®š</li>
                <li class="{% if progress_percentage >= 20 %}active{% endif %} {% if progress_percentage >= 40 %}complete{% endif %}">æœªç™ºé€</li>
                <li class="{% if progress_percentage >= 40 %}active{% endif %} {% if progress_percentage >= 60 %}complete{% endif %}">ç™ºé€æ¸ˆã¿</li>
                <li class="{% if progress_percentage >= 60 %}active{% endif %} {% if progress_percentage >= 80 %}complete{% endif %}">å—ã‘å–ã‚Šå®Œäº†</li>
                <li class="{% if progress_percentage == 100 %}active complete{% endif %}">å–å¼•å®Œäº†</li>
            </ul>
        </div>
    </div>
</div>

<!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ -->
<div class="chat-container fixed-bottom">
    <h3 class="text-center">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ</h3>
    <div id="chat-box">
        {% for message in messages %}
            <div class="chat-message" data-message-id="{{ message.id }}" ondblclick="setReply('{{ message.id }}', '{{ message.content }}')">
                <strong>{{ message.sender.username }}</strong>: {{ message.content }}
                {% if message.reply_to %}
                    <div class="reply-message">â†³ {{ message.reply_to.content }}</div>
                {% endif %}
                {% if message.is_read %}
                    <span class="text-muted small">âœ” æ—¢èª­</span>
                {% endif %}
                <div class="reaction-menu">
                    <button onclick="sendReaction('{{ message.id }}', 'ğŸ‘')">ğŸ‘</button>
                    <button onclick="sendReaction('{{ message.id }}', 'â¤ï¸')">â¤ï¸</button>
                    <button onclick="sendReaction('{{ message.id }}', 'ğŸ˜‚')">ğŸ˜‚</button>
                </div>
            </div>
        {% endfor %}
    </div>

    {% if transaction.status != "completed" %}
    <div class="chat-input-container">
        <input type="text" id="chat-input" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›">
        <input type="hidden" id="reply-to" value="">
        <button id="send-button">é€ä¿¡</button>
    </div>
    {% else %}
    <div class="alert alert-info text-center">ã“ã®å–å¼•ã¯å®Œäº†ã—ã¦ã„ã‚‹ãŸã‚ã€ãƒãƒ£ãƒƒãƒˆã¯å±¥æ­´ã®ã¿é–²è¦§å¯èƒ½ã§ã™ã€‚</div>
    {% endif %}
    
    <p id="typing-indicator" style="display:none;">å…¥åŠ›ä¸­...</p>
</div>

<!-- è©•ä¾¡ãƒ¢ãƒ¼ãƒ€ãƒ« (ãƒ•ã‚©ãƒ¼ãƒ ) -->
<div class="modal fade" id="ratingModal" tabindex="-1" aria-labelledby="ratingModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ratingModalLabel">ç›¸äº’è©•ä¾¡</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form method="POST" action="{% url 'transactions:submit_transaction_rating' transaction.id %}">
                {% csrf_token %}
                <div class="modal-body">
                    <label for="rating">è©•ä¾¡</label>
                    <div class="form-check">
                        <input type="radio" class="form-check-input" id="good" name="rating" value="good" required>
                        <label class="form-check-label" for="good">è‰¯ã‹ã£ãŸ</label>
                    </div>
                    <div class="form-check">
                        <input type="radio" class="form-check-input" id="bad" name="rating" value="bad">
                        <label class="form-check-label" for="bad">æ®‹å¿µã ã£ãŸ</label>
                    </div>

                    <label for="comment" class="mt-3">ã‚³ãƒ¡ãƒ³ãƒˆ</label>
                    <textarea class="form-control" id="comment" name="comment" rows="3" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">é–‰ã˜ã‚‹</button>
                    <button type="submit" class="btn btn-primary">æŠ•ç¨¿</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    const transactionId = "{{ transaction.id }}";
    const chatSocket = new WebSocket(`ws://${window.location.host}/ws/chat/${transactionId}/`);

    chatSocket.onmessage = function(event) {
        const data = JSON.parse(event.data);
        console.log("ğŸ”¥ WebSocket å—ä¿¡ãƒ‡ãƒ¼ã‚¿:", data);

        const chatBox = document.getElementById("chat-box");

        if (data.type === "chat_message") {
            let newMessage = document.createElement("div");
            newMessage.classList.add("chat-message");
            newMessage.setAttribute("data-message-id", data.message_id);
            
            newMessage.innerHTML = `<strong>${data.sender}</strong>: ${data.message}`;

            if (data.reply_to && data.reply_to !== "null") {
                let replyElement = document.createElement("div");
                replyElement.classList.add("reply-message");
                replyElement.innerText = `â†³ ${data.reply_to}`;
                newMessage.appendChild(replyElement);
            }

            chatBox.appendChild(newMessage);
            chatBox.scrollTop = chatBox.scrollHeight; // æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        } 

        // æ—¢èª­é€šçŸ¥ã‚’å—ä¿¡ã—ãŸã‚‰ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
        else if (data.type === "update_is_read") {
            let msgElement = document.querySelector(`.chat-message[data-message-id="${data.message_id}"]`);
            if (msgElement) {
                msgElement.classList.add("read");  // CSS ã§æ—¢èª­ã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨
                msgElement.setAttribute("data-is-read", "true");

                // æ—¢èª­ãƒ»æœªèª­ã®ãƒ©ãƒ™ãƒ«æ›´æ–°
                let statusElement = msgElement.querySelector(".read-status");
                if (statusElement) {
                    statusElement.innerText = "âœ” æ—¢èª­";
                }
            }
        }
        
        // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‡¦ç†
        else if (data.typing) {
            const typingIndicator = document.getElementById("typing-indicator");
            if (typingIndicator) {
                typingIndicator.style.display = "block";
                setTimeout(() => { typingIndicator.style.display = "none"; }, 2000);
            }
        }
    };


    document.getElementById("send-button").onclick = function() {
        const messageInput = document.getElementById("chat-input");
        const replyTo = document.getElementById("reply-to").value;
        const message = messageInput.value;
        chatSocket.send(JSON.stringify({ "message": message, "reply_to": replyTo }));
        messageInput.value = "";
        document.getElementById("reply-to").value = "";
    };



    function sendReaction(messageId, reaction) {
        chatSocket.send(JSON.stringify({ "reaction": reaction, "message_id": messageId }));
    }

    function setReply(messageId, content) {
        document.getElementById("reply-to").value = messageId;
        document.getElementById("chat-input").placeholder = `è¿”ä¿¡: ${content}`;
    }

    document.getElementById("chat-input").addEventListener("input", function() {
        chatSocket.send(JSON.stringify({ "typing": true }));
    });


    function updateChatUI(messageData) {
        console.log("ğŸ“Œ `updateChatUI()` ãŒå®Ÿè¡Œã•ã‚ŒãŸ:", messageData);

        const chatBox = document.getElementById("chat-box");
        if (!chatBox) {
            console.error("âŒ `#chat-box` ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
            return;
        }

        const messageDiv = document.createElement("div");
        messageDiv.classList.add("chat-message");
        messageDiv.setAttribute("data-message-id", messageData.message_id);
        messageDiv.setAttribute("data-is-read", messageData.is_read ? "true" : "false");
        
        messageDiv.innerHTML = `
            <strong>${messageData.sender}</strong>: ${messageData.message}
            <span class="read-status">${messageData.is_read ? "âœ” æ—¢èª­" : "æœªèª­"}</span>
        `;
        
        if (messageData.reply_to) {
            const replyDiv = document.createElement("div");
            replyDiv.classList.add("reply-message");
            replyDiv.textContent = `â†³ ${messageData.reply_to}`;
            messageDiv.appendChild(replyDiv);
        }

        // æ—¢èª­ã®å ´åˆã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨
        if (messageData.is_read) {
            messageDiv.classList.add("read");
        }

        chatBox.appendChild(messageDiv);
        chatBox.scrollTop = chatBox.scrollHeight; // æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
    }

</script>

<style>
    .progressbar {
        position: relative;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: space-between;
        list-style-type: none;
    }

    .progressbar li {
        position: relative;
        text-align: center;
        text-transform: uppercase;
        width: 20%;
        color: #999999;
        font-weight: bold;
    }

    .progressbar li:before {
        display: block;
        width: 18px;
        height: 18px;
        margin: 0 auto 10px auto;
        content: '';
        text-align: center;
        border-radius: 50%;
        background-color: #f5f5f5;
        border: 2px solid #ddd;
    }

    .progressbar li:after {
        position: absolute;
        z-index: -1;
        top: 8px;
        left: -50%;
        width: 100%;
        height: 2px;
        content: '';
        background-color: #f5f5f5;
    }

    .progressbar li:first-child:after {
        content: none;
    }

    .progressbar li.active {
        color: #007bff;
    }

    .progressbar li.active:before {
        background-color: #007bff;
        border-color: #007bff;
    }

    .progressbar li.active:after {
        background-color: #007bff;
    }









    /* ã‚«ãƒ¼ãƒ‰ã«ãƒ›ãƒãƒ¼åŠ¹æœã‚’è¿½åŠ  */
    .card.hover-effect {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card.hover-effect:hover {
        transform: scale(1.05); /* ã‚«ãƒ¼ãƒ‰ãŒå°‘ã—åºƒãŒã‚‹ï¼ˆ1.05å€ï¼‰ */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* å½±ã‚’ã¤ã‘ã¦æµ®ãä¸ŠãŒã‚Šæ„Ÿã‚’å‡ºã™ */
    }

    .card-img-top {
        position: relative;
        width: 100%; /* å¿…è¦ã«å¿œã˜ã¦èª¿æ•´ */
        height: 100%; /* å¿…è¦ã«å¿œã˜ã¦èª¿æ•´ */
        overflow: hidden;
    }

    .sold-overlay {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 10;
        width: 30%; /* è¦ªè¦ç´ ã«ã´ã£ãŸã‚Šåˆã‚ã›ã‚‹ */
    }

    .sold-image {
        width: 100%;  /* SVGã‚’ç”»åƒã®ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦ã´ã£ãŸã‚Šé…ç½® */
        height: 100%; /* åŒã˜ãé«˜ã•ã‚‚åˆã‚ã›ã‚‹ */
    }


    /* ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ */
    .chat-container {
        background: white;
        padding: 10px;
        width: 100%;
        max-width: 100%;
        position: fixed;
        bottom: 0;
        left: 0;
        border-top: 2px solid #ddd;
        box-shadow: 0px -2px 5px rgba(0, 0, 0, 0.1);
    }
    #chat-box {
        max-height: 250px;
        overflow-y: auto;
        border-bottom: 1px solid #ccc;
        margin-bottom: 10px;
        padding: 5px;
    }
    .chat-message {
        padding: 5px;
        border-radius: 5px;
        margin-bottom: 5px;
        background: #f1f1f1;
        position: relative;
    }
    .reply-message {
        font-size: 12px;
        color: #666;
        margin-top: 3px;
        padding-left: 10px;
        border-left: 2px solid #ccc;
    }
    .reaction-menu {
        display: none;
        position: absolute;
        right: 5px;
        bottom: 5px;
    }
    .chat-message:hover .reaction-menu {
        display: block;
    }
    .chat-input-container {
        display: flex;
        padding: 10px;
        border-top: 1px solid #ddd;
    }
    .chat-input-container input {
        flex-grow: 1;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    .chat-input-container button {
        margin-left: 10px;
        padding: 8px 15px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
    }

    /* æ—¢èª­ãƒ»æœªèª­ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .chat-message {
        padding: 10px;
        border-bottom: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .chat-message .read-status {
        font-size: 12px;
        color: gray;
    }

    .chat-message.read .read-status {
        color: blue;  /* æ—¢èª­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯é’è‰²ã« */
    }


</style>

{% endblock %}
